# Looker Studio Dashboard 配置指南

## 概述

本指南将帮助您创建一个功能完整的交易分析Dashboard，展示您的投资表现和交易模式。

## 前置条件

✅ Google Sheets "投资交易记录" 电子表格已创建
✅ 数据已导入（trades: 58条, positions: 9条, closed_positions: 4条）
✅ Google 账号已登录

## 第一步：创建新报表

1. **访问 Looker Studio**
   - 打开 [https://lookerstudio.google.com/](https://lookerstudio.google.com/)
   - 使用您的Google账号登录

2. **创建新报表**
   - 点击 **"创建"** → **"报表"**
   - 选择空白报表

## 第二步：连接数据源

### 2.1 连接Google Sheets数据源

1. **添加数据源**
   - 在右侧面板点击 **"添加数据"**
   - 选择 **"Google Sheets"**

2. **选择电子表格**
   - 找到并选择 **"投资交易记录"**
   - 选择工作表：**trades**（主数据源）
   - 点击 **"连接"**

3. **重复连接其他工作表**
   - 再次点击 **"添加数据"**
   - 分别连接：
     - **positions** 工作表
     - **closed_positions** 工作表

### 2.2 数据源配置

**trades 数据源配置**：
- 在数据源设置中，确认以下字段类型：
  - `trade_date`: 日期
  - `quantity`: 数字
  - `price`: 数字
  - `amount`: 数字
  - `net_amount`: 数字

## 第三步：创建第一层指标（整体概览）

### 3.1 设置页面布局

1. **页面设置**
   - 点击画布空白处
   - 右侧面板 → **"画布"** → **"背景"**：白色
   - **"画布大小"**：自定义 (1200px × 800px)

### 3.2 创建核心指标卡片

**卡片1：总交易次数**
1. 添加组件：**"记分卡"**
2. 数据源：trades
3. 指标：**ID 计数**（`COUNT(id)`）
4. 样式设置：
   - 标题：**"总交易次数"**
   - 字体大小：大
   - 颜色：深蓝色

**卡片2：总盈亏**
1. 添加组件：**"记分卡"**
2. 数据源：closed_positions
3. 指标：**net_pnl 总计**（`SUM(net_pnl)`）
4. 样式设置：
   - 标题：**"总盈亏"**
   - 字体大小：大
   - 颜色：根据值变化（正数绿色，负数红色）

**卡片3：胜率**
1. 添加组件：**"记分卡"**
2. 数据源：closed_positions
3. 创建计算字段：
   ```
   胜交易数 = COUNT_IF(net_pnl > 0)
   总交易数 = COUNT(id)
   胜率 = (胜交易数 / 总交易数) * 100
   ```
4. 指标：**胜率**
5. 样式设置：
   - 标题：**"胜率"**
   - 格式：百分比
   - 颜色：深绿色

**卡片4：当前持仓数**
1. 添加组件：**"记分卡"**
2. 数据源：positions
3. 指标：**symbol 计数**（`COUNT(symbol)`）
4. 样式设置：
   - 标题：**"当前持仓数"**
   - 字体大小：大
   - 颜色：橙色

### 3.3 布局排列

将4个卡片水平排列在页面顶部，每个卡片宽度约280px。

## 第四步：创建第二层指标（趋势分析）

### 4.1 每日盈亏趋势图

1. **添加图表**
   - 组件类型：**"时间序列图表"**
   - 数据源：trades

2. **配置维度**
   - X轴：**trade_date**（日期）
   - 设置为"年月日"格式

3. **配置指标**
   - Y轴1（柱状图）：**net_amount 总计**（`SUM(net_amount)`）
     - 颜色：条件格式（>0绿色，<0红色）
   - Y轴2（折线图）：**累计盈亏**（运行总计）
     - 创建计算字段：`RUNNING_SUM(SUM(net_amount))`
     - 颜色：蓝色

4. **样式设置**
   - 标题：**"每日盈亏趋势"**
   - 图例：显示
   - 网格线：显示

### 4.2 交易量分布图

1. **添加图表**
   - 组件类型：**"柱状图"**
   - 数据源：trades

2. **配置**
   - 维度：**symbol**（证券代码）
   - 指标：**amount 总计**（`SUM(amount)`）
   - 排序：按金额降序，显示前10名

3. **样式设置**
   - 标题：**"交易金额分布TOP10"**
   - 颜色：渐变蓝色

## 第五步：创建第三层指标（深度分析）

### 5.1 盈亏排行榜

**盈利TOP5表格**
1. **添加表格**
   - 组件类型：**"表格"**
   - 数据源：closed_positions

2. **配置**
   - 维度：symbol, security_name
   - 指标：
     - net_pnl 总计
     - pnl_pct 平均值
     - id 计数（交易次数）
   - 过滤器：net_pnl > 0
   - 排序：net_pnl 总计 降序
   - 行数限制：5

3. **样式设置**
   - 标题：**"盈利TOP5"**
   - 条件格式：net_pnl列，绿色渐变

**亏损TOP5表格**
1. **复制上面的表格**
2. **修改过滤器**：net_pnl < 0
3. **修改排序**：net_pnl 总计 升序（最亏的在前面）
4. **修改标题**：**"亏损TOP5"**
5. **条件格式**：net_pnl列，红色渐变

### 5.2 持仓分析

**当前持仓表格**
1. **添加表格**
   - 组件类型：**"表格"**
   - 数据源：positions

2. **配置**
   - 维度：symbol, security_name
   - 指标：
     - total_quantity
     - avg_cost
     - total_cost
     - unrealized_pnl（如果有）
   - 过滤器：total_quantity > 0

3. **样式设置**
   - 标题：**"当前持仓明细"**
   - 添加货币格式

## 第六步：添加交互功能

### 6.1 日期范围选择器

1. **添加控件**
   - 组件类型：**"日期范围选择器"**
   - 数据源：trades
   - 字段：trade_date

2. **配置**
   - 默认范围：最近30天
   - 应用到所有图表

### 6.2 证券代码过滤器

1. **添加控件**
   - 组件类型：**"下拉列表"**
   - 数据源：trades
   - 字段：symbol

2. **配置**
   - 允许多选：是
   - 默认值：全选

## 第七步：最终优化

### 7.1 页面布局优化

- **标题**：添加大标题"投资交易复盘分析"
- **说明文字**：添加数据更新时间说明
- **间距**：确保组件间有适当间距
- **对齐**：使用对齐工具确保布局整齐

### 7.2 主题和配色

1. **主题设置**
   - 右侧面板 → **"主题"**
   - 选择简洁的主题

2. **配色方案**
   - 主色调：蓝色系
   - 盈利：绿色
   - 亏损：红色
   - 中性：灰色

### 7.3 响应式设计

- 测试不同屏幕尺寸的显示效果
- 调整组件大小和位置

## 第八步：保存和分享

### 8.1 保存报表

1. **保存**
   - 点击右上角 **"保存"**
   - 命名：**"投资交易复盘分析Dashboard"**

2. **设置刷新**
   - 数据源设置 → 刷新频率：**"每5分钟"**

### 8.2 分享Dashboard

1. **获取链接**
   - 右上角 **"分享"** → **"获取链接"**
   - 选择访问权限：**"知道链接的任何人"**

2. **嵌入网站**（可选）
   - 点击 **"嵌入报表"**
   - 复制嵌入代码

## 故障排除

### 常见问题

**Q1: 数据不显示？**
- 检查数据源连接是否正常
- 确认Google Sheets中有数据
- 刷新数据源

**Q2: 指标计算错误？**
- 检查字段类型设置
- 验证计算字段公式
- 确认聚合函数正确

**Q3: 图表显示异常？**
- 检查维度和指标配置
- 确认数据格式正确
- 调整图表类型

### 性能优化

1. **数据源优化**
   - 减少不必要的数据字段
   - 使用合适的数据刷新频率

2. **图表优化**
   - 限制数据点数量
   - 避免过度复杂的计算

---

## 🎉 完成！

按照本指南，您将创建一个功能完整的交易分析Dashboard，包含：

✅ **核心指标概览**：总交易次数、总盈亏、胜率、持仓数
✅ **趋势分析**：每日盈亏趋势、交易量分布
✅ **深度分析**：盈亏排行榜、持仓明细
✅ **交互功能**：日期筛选、证券过滤

Dashboard将每5分钟自动更新，让您随时掌握最新的投资表现！