# 常见问题 (FAQ)

## 目录

1. [安装和配置](#安装和配置)
2. [日常使用](#日常使用)
3. [数据处理](#数据处理)
4. [Dashboard和报告](#dashboard和报告)
5. [技术问题](#技术问题)
6. [故障排除](#故障排除)

## 安装和配置

### Q: 系统支持哪些操作系统？

**A**: 系统支持以下操作系统：
- **Windows 10/11** - 完全支持
- **macOS 10.14+** - 完全支持
- **Linux (Ubuntu/CentOS/Debian)** - 完全支持

### Q: Python版本要求是什么？

**A**: 需要 **Python 3.10 或更高版本**。

检查Python版本：
```bash
python --version
# 或
python3 --version
```

### Q: 必须使用Google Sheets吗？

**A**: 在MVP阶段，是的。系统设计支持未来的本地数据库选项：
- **当前版本**: 使用Google Sheets（云端存储）
- **未来版本**: 将支持SQLite（本地存储）

### Q: 可以在没有网络的情况下使用吗？

**A**: 目前的MVP版本需要网络连接来访问Google Sheets。离线版本将在后续版本中提供。

## 日常使用

### Q: 系统多久检查一次新文件？

**A**: 默认配置为**每小时检查一次**。您可以：
- 重启系统立即触发检查
- 修改配置文件调整检查频率

### Q: 可以同时处理多个Excel文件吗？

**A**: **可以**。系统会：
- 按时间顺序处理所有文件
- 自动避免重复导入相同文件
- 使用文件哈希值检测重复

### Q: 删除已处理的Excel文件安全吗？

**A**: **安全**。一旦数据被成功导入到Google Sheets，原始Excel文件就可以删除。建议：
- 保留原始文件一段时间作为备份
- 确认Dashboard中的数据正确后再删除

### Q: 系统能处理历史数据吗？

**A**: **可以**。系统可以处理任意时间范围的历史数据：
- 将所有历史Excel文件放入 `trading_records/` 文件夹
- 系统会自动按时间顺序处理
- 支持跨年、跨月的完整历史分析

## 数据处理

### Q: 系统使用什么算法计算盈亏？

**A**: 系统使用 **FIFO（先进先出）算法**：
- 先买入的股票先卖出
- 计算精确的平均持仓成本
- 包含所有手续费成本

### Q: 如何处理期权和其他衍生品？

**A**: 系统可以识别期权交易：
- 期权代码通常包含C（Call）或P（Put）
- 系统会自动识别为期权类型
- 盈亏计算逻辑与股票相同

### Q: 如何处理分红和拆股？

**A**: 当前版本的MVP不自动处理：
- **股票分红**: 需要手动调整持仓成本
- **股票拆股**: 需要手动调整数量和成本
- **未来版本**: 将自动处理这些公司行为

### Q: 数据准确性如何保证？

**A**: 系统采用多重验证机制：
- 文件哈希防止重复导入
- 数据完整性验证
- FIFO算法确保配对准确
- 详细的日志记录可追溯

## Dashboard和报告

### Q: Dashboard多久更新一次？

**A**: Looker Studio Dashboard的更新频率：
- **自动刷新**: 每5分钟左右
- **手动刷新**: 点击刷新按钮立即更新
- **数据延迟**: 通常在1-2分钟内

### Q: 可以自定义Dashboard吗？

**A**: **可以**。您可以：
- 登录Looker Studio
- 复制现有报表
- 根据需要修改图表和指标
- 创建个性化的分析视图

### Q: 可以导出数据吗？

**A**: **可以**。多种导出方式：
- **Google Sheets**: 直接下载电子表格
- **CSV格式**: 从Sheets导出CSV文件
- **PDF报告**: 打印Dashboard为PDF
- **未来版本**: 将提供更多导出选项

### Q: 数据安全吗？

**A**: 数据安全性取决于配置：
- **Google方案**: 数据存储在Google云端，使用加密传输
- **Google的安全**: 符合企业级安全标准
- **访问控制**: 只有您和授权用户可以访问

## 技术问题

### Q: 系统占用多少系统资源？

**A**: 系统非常轻量：
- **内存占用**: 通常小于50MB
- **CPU使用**: 仅在处理文件时活跃
- **磁盘空间**: 仅需存储日志文件
- **网络带宽**: 极小，仅用于API调用

### Q: 可以在服务器上运行吗？

**A**: **可以**。系统支持服务器部署：
- **云服务器**: AWS、阿里云、腾讯云等
- **VPS**: 任何支持Python的虚拟主机
- **成本**: 最低配置即可（1GB RAM）

### Q: 如何备份数据？

**A**: 多种备份方式：
- **Google Sheets自动备份**: Google提供自动备份
- **手动导出**: 定期下载电子表格副本
- **版本历史**: Google Sheets保存30天版本历史
- **未来版本**: 将提供自动备份功能

### Q: 系统可以多实例运行吗？

**A**: **不建议**。建议：
- 每个账户只运行一个实例
- 避免数据冲突和重复处理
- 如需多设备访问，使用相同的Google账号

## 故障排除

### Q: 系统启动失败怎么办？

**A**: 按以下步骤排查：

1. **检查Python环境**
   ```bash
   python --version
   pip list | grep pandas
   ```

2. **检查依赖安装**
   ```bash
   cd backend
   pip install -r requirements.txt
   ```

3. **查看错误日志**
   ```bash
   cat backend/logs/trading_system.log
   ```

4. **重新运行安装脚本**

### Q: 文件处理失败怎么办？

**A**: 常见原因和解决方案：

1. **文件格式问题**
   - 确认是Excel文件（.xlsx, .xls, .csv）
   - 尝试用Excel打开文件确认格式正确
   - 重新导出交易记录

2. **文件内容问题**
   - 检查是否包含必要的列
   - 确认数据格式正确
   - 移除密码保护

3. **权限问题**
   - 确认文件没有只读属性
   - 检查文件夹权限
   - 以管理员身份运行（Windows）

### Q: Google Sheets连接失败？

**A**: 详细排查步骤：

1. **检查凭证文件**
   ```bash
   ls -la backend/credentials/service_account.json
   ```

2. **测试网络连接**
   ```bash
   ping sheets.google.com
   ```

3. **验证API权限**
   - 重新检查Google Cloud设置
   - 确认API已启用
   - 重新生成服务账号密钥

4. **查看详细错误信息**
   - 检查系统日志
   - 确认具体的错误类型

### Q: 数据计算错误？

**A**: 可能的原因：

1. **原始数据错误**
   - 检查Excel文件中的价格和数量
   - 确认手续费金额正确
   - 验证日期格式

2. **配对问题**
   - FIFO算法可能有特殊处理
   - 检查是否有异常交易记录
   - 查看详细的处理日志

3. **系统Bug**
   - 记录具体的错误情况
   - 提供样本数据进行调试
   - 联系技术支持

## 性能优化

### Q: 处理大量数据会慢吗？

**A**: 性能特征：
- **小文件（<1000条记录）**: 秒级处理
- **中等文件（1000-10000条）**: 分钟级处理
- **大文件（>10000条）**: 可能需要更长时间

### Q: 如何提高处理速度？

**A**: 优化建议：
1. **定期清理**: 删除已处理的Excel文件
2. **文件分割**: 将大文件分割成小文件
3. **避免重复**: 不要重复导入相同数据
4. **硬件升级**: 使用SSD硬盘提升I/O性能

### Q: 系统有数据量限制吗？

**A**: 理论限制：
- **Google Sheets**: 单表最多500万行
- **实际建议**: 保持100万行以内以获得最佳性能
- **交易记录**: 可支持10年以上的个人交易数据

## 其他问题

### Q: 可以免费使用吗？

**A**: **完全免费**：
- 系统软件：开源免费
- Google服务：免费额度足够个人使用
- 无任何订阅费用
- 无功能限制

### Q: 如何获得技术支持？

**A**: 多种支持渠道：
1. **文档**: 查看详细的用户手册
2. **GitHub**: 在项目仓库提交Issue
3. **社区**: 加入用户交流群
4. **邮件**: 联系技术支持邮箱

### Q: 可以贡献代码吗？

**A**: **欢迎贡献**！您可以：
- 报告Bug和问题
- 提出功能建议
- 提交代码改进
- 完善文档

### Q: 系统的未来计划是什么？

**A**: 发展路线图：
- **短期**: 完善核心功能，支持更多券商
- **中期**: 本地数据库选项，高级分析功能
- **长期**: AI分析，移动端App，社区功能

---

**还有其他问题？请查看[用户手册](user_guide.md)或联系技术支持。**